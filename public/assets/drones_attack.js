function refreshMap(){markerClusterer&&markerClusterer.clearMarkers();var e=[],t=new google.maps.MarkerImage(imageUrl,new google.maps.Size(24,32));for(var n=0;n<1e3;++n){var r=new google.maps.LatLng(data.photos[n].latitude,data.photos[n].longitude),i=new google.maps.Marker({position:r,draggable:!0,icon:t});e.push(i)}var s=parseInt(document.getElementById("zoom").value,10),o=parseInt(document.getElementById("size").value,10),u=parseInt(document.getElementById("style").value,10);s=s==-1?null:s,o=o==-1?null:o,u=u==-1?null:u,markerClusterer=new MarkerClusterer(map,e,{maxZoom:s,gridSize:o,styles:styles[u]})}function initialize(){map=new google.maps.Map(document.getElementById("map"),{zoom:2,center:new google.maps.LatLng(39.91,116.38),mapTypeId:google.maps.MapTypeId.ROADMAP});var e=document.getElementById("refresh");google.maps.event.addDomListener(e,"click",refreshMap);var t=document.getElementById("clear");google.maps.event.addDomListener(t,"click",clearClusters),refreshMap()}function clearClusters(e){e.preventDefault(),e.stopPropagation(),markerClusterer.clearMarkers()}var script='<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclusterer/1.0/src/markerclusterer';document.location.search.indexOf("packed")!==-1&&(script+="_packed"),document.location.search.indexOf("compiled")!==-1&&(script+="_compiled"),script+='.js"></script>',document.write(script),google.load("maps","3",{other_params:"sensor=false"}),google.setOnLoadCallback(initialize);var styles=[[{url:"../images/people35.png",height:35,width:35,opt_anchor:[16,0],opt_textColor:"#ff00ff",opt_textSize:10},{url:"../images/people45.png",height:45,width:45,opt_anchor:[24,0],opt_textColor:"#ff0000",opt_textSize:11},{url:"../images/people55.png",height:55,width:55,opt_anchor:[32,0],opt_textSize:12}],[{url:"../images/conv30.png",height:27,width:30,anchor:[3,0],textColor:"#ff00ff",opt_textSize:10},{url:"../images/conv40.png",height:36,width:40,opt_anchor:[6,0],opt_textColor:"#ff0000",opt_textSize:11},{url:"../images/conv50.png",width:50,height:45,opt_anchor:[8,0],opt_textSize:12}],[{url:"../images/heart30.png",height:26,width:30,opt_anchor:[4,0],opt_textColor:"#ff00ff",opt_textSize:10},{url:"../images/heart40.png",height:35,width:40,opt_anchor:[8,0],opt_textColor:"#ff0000",opt_textSize:11},{url:"../images/heart50.png",width:50,height:44,opt_anchor:[12,0],opt_textSize:12}]],markerClusterer=null,map=null,imageUrl="http://chart.apis.google.com/chart?cht=mm&chs=24x32&chco=FFFFFF,008CFF,000000&ext=.png";